# Spring Boot 应用配置
spring:
  profiles:
    active: dev  # 默认使用开发环境配置
  
  # 应用信息
  application:
    name: lucky-sms
  
  # 服务器配置
  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 10MB

# 服务器配置
server:
  port: 8081
  servlet:
    context-path: /api
    encoding:
      charset: UTF-8
      enabled: true
      force: true
  tomcat:
    max-connections: 10000
    max-threads: 200
    min-spare-threads: 10

# 日志配置
logging:
  level:
    root: INFO
    com.yangshengzhou.lucky_sms: DEBUG  # 项目包下的日志级别
  pattern:
    console: "%d{yyyy-MM-dd HH:mm:ss} - %logger{36} - %msg%n"
  file:
    name: logs/lucky-sms.log
    max-size: 10MB
    max-history: 30

# MyBatis配置
mybatis-plus:
  mapper-locations: classpath:mapper/*.xml
  type-aliases-package: com.yangshengzhou.lucky_sms.pojo
  configuration:
    map-underscore-to-camel-case: true
    cache-enabled: true
    lazy-loading-enabled: true
    aggressive-lazy-loading: false
    multiple-result-sets-enabled: true
    use-generated-keys: true
    default-statement-timeout: 30
  global-config:
    db-config:
      logic-delete-field: deleted
      logic-not-delete-value: 0
      logic-delete-value: 1
      db-type: mysql
    enable-sql-runner: true
    banner: false

# RocketMQ配置
rocketmq:
  name-server: 127.0.0.1:9876
  producer:
    group: lucky-sms-producer-group
    send-message-timeout: 300000
    retry-times-when-send-failed: 2
    retry-times-when-send-async-failed: 2
    max-message-size: 4194304
  consumer:
    pull-batch-size: 10
    enabled: false  # 默认禁用消费者，避免连接失败导致应用启动失败
    course-selection:
      enabled: false
    user-operation:
      enabled: false

# JWT配置
jwt:
  secret: ${JWT_SECRET:3f7d2a9b5e8c1d4f6h0j2k7m9n1p3q5r8t0v2x4y6z8b0d2f4h6j8l0n2p}
  expiration: ${JWT_EXPIRATION:86400000}
  issuer: lucky-sms

# 应用自定义配置
app:
  version: 1.0.0
  cors:
    allowed-origins: "http://localhost:8080,http://127.0.0.1:8080"
    allowed-methods: "GET,POST,PUT,DELETE,OPTIONS"
    allowed-headers: "*"
    allow-credentials: true
  
  # 文件上传配置
  upload:
    max-size: 10MB
    allowed-extensions: ".jpg,.jpeg,.png,.gif,.pdf,.doc,.docx"
    
  # 缓存配置
  cache:
    timeout: 3600  # 1小时
    
  # 安全配置
  security:
    password-strength: medium  # low, medium, high
    max-login-attempts: 5
    lockout-duration: 1800  # 30分钟